<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cinematic Counter-Cartographies</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* === COMPLETELY REDESIGNED HOMEPAGE === */
    
    html {
      scroll-behavior: smooth;
    }
    
    :root {
      --gold: #e6a93a;
      --teal: #6fe7c1;
      --forest: #288366;
      --dark-forest: #0a2321;
      --sand: #beab5e;
      --brown: #4e2e1e;
      --crimson: #b94e3a;
      --cream: #f7f3e9;
    }

    body {
      background: linear-gradient(to bottom, #d4c27e 0%, var(--sand) 50%, #c9b56d 100%);
      color: #1a1a1a;
      margin: 0;
      font-family: 'Georgia', 'Times New Roman', serif;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Subtle texture overlay */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
      pointer-events: none;
      z-index: -1;
      opacity: 0.3;
    }

    /* NAVBAR - Cleaner */
    .topnav {
      background: linear-gradient(180deg, rgba(10, 35, 33, 0.98) 0%, rgba(10, 35, 33, 0.95) 100%);
      backdrop-filter: blur(10px);
      color: var(--teal);
      padding: 1.2rem 3rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .topnav .brand {
      font-family: 'Oswald', sans-serif;
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--gold);
      letter-spacing: 0.5px;
    }

    .topnav .menu {
      display: flex;
      gap: 0.5rem;
    }

    .topnav .menu a {
      color: #eaf7f2;
      font-size: 0.95rem;
      font-weight: 500;
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      transition: all 0.3s ease;
      font-family: 'Oswald', sans-serif;
      letter-spacing: 0.3px;
    }

    .topnav .menu a:hover,
    .topnav .menu a.active {
      background: rgba(230, 169, 58, 0.2);
      color: var(--gold);
    }

    /* HERO SECTION - Completely Redesigned */
    .hero-section {
      max-width: 1400px;
      margin: 0 auto;
      padding: 5rem 2rem 4rem;
    }

    .hero-title-wrapper {
      text-align: center;
      margin-bottom: 3rem;
    }

    .hero-main-title {
      font-family: 'Georgia', serif;
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      font-weight: 700;
      color: var(--dark-forest);
      margin: 0 0 1.5rem 0;
      line-height: 1.2;
      letter-spacing: -0.5px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .hero-subtitle {
      font-family: 'Georgia', serif;
      font-size: clamp(1.3rem, 3vw, 2rem);
      font-style: italic;
      color: var(--brown);
      margin: 0;
      font-weight: 400;
    }

    .hero-subtitle .highlight {
      color: var(--forest);
      font-weight: 600;
      font-style: normal;
    }

    /* Decorative line under title */
    .title-decoration {
      width: 120px;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: 2rem auto;
      border-radius: 2px;
    }

    /* QUOTE CAROUSEL - More Elegant */
    .quote-carousel {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100%);
      border-radius: 20px;
      padding: 3rem 2rem;
      max-width: 1100px;
      margin: 0 auto 4rem;
      box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
      position: relative;
    }

    .carousel-content {
      display: flex;
      align-items: center;
      gap: 2rem;
      justify-content: center;
    }

    .carousel-image {
      flex: 0 0 380px;
      height: 260px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      position: relative;
    }

    .carousel-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .carousel-image:hover img {
      transform: scale(1.08);
    }

    .carousel-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.95);
      border: none;
      color: var(--forest);
      font-size: 2rem;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .carousel-nav:hover {
      background: var(--gold);
      color: white;
      transform: translateY(-50%) scale(1.1);
    }

    .carousel-nav.prev { left: -25px; }
    .carousel-nav.next { right: -25px; }

    .carousel-quotes {
      position: relative;
      min-height: 280px;
    }

    .quote-slide {
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      pointer-events: none;
      transition: opacity 0.6s;
      z-index: 1;
    }

    .quote-slide.active {
      opacity: 1;
      position: relative;
      pointer-events: auto;
      z-index: 2;
    }

    .quote-text {
      font-family: 'Georgia', serif;
      font-size: 1.25rem;
      line-height: 1.8;
      color: #2a2a2a;
      margin-bottom: 1.5rem;
      font-style: italic;
    }

    .quote-text::before {
      content: '"';
      font-size: 3rem;
      color: var(--gold);
      opacity: 0.3;
      position: absolute;
      left: -10px;
      top: -20px;
    }

    .quote-author {
      font-family: 'Oswald', sans-serif;
      font-size: 1.1rem;
      color: var(--forest);
      font-weight: 600;
      text-align: right;
      font-style: normal;
    }

    .quote-author::before {
      content: '— ';
    }

    /* DIVIDER */
    .section-divider {
      text-align: center;
      margin: 5rem 0;
    }

    .divider-ornament {
      display: inline-flex;
      align-items: center;
      gap: 1.5rem;
      padding: 1rem 2.5rem;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 50px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    .divider-dot {
      width: 8px;
      height: 8px;
      background: var(--forest);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    .divider-dot:nth-child(2) { animation-delay: 0.3s; }
    .divider-dot:nth-child(3) { animation-delay: 0.6s; }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.6; }
      50% { transform: scale(1.3); opacity: 1; }
    }

    /* PROJECT DESCRIPTION */
    .project-intro {
      max-width: 900px;
      margin: 0 auto 5rem;
      padding: 0 2rem;
    }

    .intro-section {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(247, 243, 233, 0.8) 100%);
      border-radius: 16px;
      padding: 3rem;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      border-left: 5px solid var(--gold);
      margin-bottom: 2rem;
    }

    .intro-section h3 {
      font-family: 'Georgia', serif;
      font-size: 1.8rem;
      color: var(--dark-forest);
      margin: 0 0 1.5rem 0;
      font-weight: 700;
    }

    .intro-section p {
      font-size: 1.15rem;
      line-height: 1.9;
      color: #333;
      margin-bottom: 1.2rem;
    }

    .intro-section p:last-child {
      margin-bottom: 0;
    }

    .question-list {
      list-style: none;
      padding: 0;
      margin: 2rem 0 0 0;
    }

    .question-list li {
      font-size: 1.15rem;
      color: #2a2a2a;
      padding: 1rem 1rem 1rem 3rem;
      margin-bottom: 1rem;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 10px;
      position: relative;
      transition: all 0.3s ease;
    }

    .question-list li:hover {
      background: rgba(255, 255, 255, 0.9);
      transform: translateX(8px);
      box-shadow: 0 4px 15px rgba(40, 131, 102, 0.15);
    }

    .question-list li::before {
      content: '→';
      position: absolute;
      left: 1rem;
      color: var(--gold);
      font-weight: bold;
      font-size: 1.3rem;
    }

    /* NAVIGATION CARDS */
    .nav-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto 5rem;
      padding: 0 2rem;
    }

    .nav-card {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(247, 243, 233, 0.9) 100%);
      border-radius: 16px;
      padding: 2.5rem 2rem;
      text-decoration: none;
      color: inherit;
      box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .nav-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(230, 169, 58, 0.1), transparent);
      transition: left 0.6s ease;
    }

    .nav-card:hover::before {
      left: 100%;
    }

    .nav-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.2);
      border-color: var(--gold);
    }

    .nav-card h2 {
      font-family: 'Georgia', serif;
      font-size: 1.8rem;
      color: var(--dark-forest);
      margin: 0 0 1rem 0;
      font-weight: 700;
    }

    .nav-card p {
      font-size: 1.05rem;
      line-height: 1.7;
      color: #444;
      margin-bottom: 1.5rem;
    }

    .nav-card .card-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--forest);
      font-weight: 600;
      font-family: 'Oswald', sans-serif;
      font-size: 1.1rem;
      letter-spacing: 0.3px;
      transition: all 0.3s ease;
    }

    .nav-card:hover .card-link {
      color: var(--gold);
      gap: 1rem;
    }

    .card-link::after {
      content: '→';
      font-size: 1.3rem;
    }

    /* FOOTER */
    .footer {
      background: linear-gradient(180deg, rgba(10, 35, 33, 0.95) 0%, rgba(10, 35, 33, 0.98) 100%);
      color: var(--teal);
      text-align: center;
      padding: 2.5rem 2rem;
      font-size: 0.95rem;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
    }

    /* SCROLL TO TOP */
    #scrollTopBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--forest);
      color: white;
      border: none;
      border-radius: 50%;
      width: 55px;
      height: 55px;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(40, 131, 102, 0.4);
      transition: all 0.3s ease;
      z-index: 99;
    }

    #scrollTopBtn:hover {
      background: var(--gold);
      transform: translateY(-5px);
      box-shadow: 0 6px 30px rgba(230, 169, 58, 0.5);
    }

    /* RESPONSIVE */
    @media (max-width: 900px) {
      .carousel-content {
        flex-direction: column;
      }

      .carousel-image {
        flex: 0 0 auto;
        width: 100%;
        max-width: 450px;
        height: 250px;
      }

      .carousel-nav.prev { left: 10px; }
      .carousel-nav.next { right: 10px; }

      .nav-grid {
        grid-template-columns: 1fr;
      }

      .intro-section {
        padding: 2rem 1.5rem;
      }

      .topnav {
        padding: 1rem 1.5rem;
      }

      .topnav .menu {
        gap: 0.3rem;
      }

      .topnav .menu a {
        padding: 0.5rem 0.8rem;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 600px) {
      .hero-section {
        padding: 3rem 1rem 2rem;
      }

      .quote-carousel {
        padding: 2rem 1rem;
      }

      .quote-text {
        font-size: 1.1rem;
      }

      .carousel-nav {
        width: 45px;
        height: 45px;
        font-size: 1.5rem;
      }

      .question-list li {
        font-size: 1rem;
        padding-left: 2.5rem;
      }
    }
  </style>
</head>
<body>
  <nav class="topnav">
    <div class="brand">Cinematic Counter‑Cartographies</div>
    <div class="menu">
      <a href="index.html" class="active">Home</a>
      <a href="map.html">Map & Archive</a>
      <a href="checkpoints.html">Checkpoints</a>
      <a href="analysis.html">Visual Analysis</a>
      <a href="not-mapped.html">What's Not Mapped</a>
    </div>
  </nav>

  <main>
    <!-- HERO SECTION -->
    <section class="hero-section">
      <div class="hero-title-wrapper">
        <h1 class="hero-main-title" id="colorful-title">Cinematic Counter‑Cartographies</h1>
        <div class="title-decoration"></div>
        <p class="hero-subtitle">
          Exploring <span class="highlight">formal refusal</span> in Palestinian cinema
        </p>
      </div>
    </section>

    <!-- QUOTE CAROUSEL -->
    <section class="quote-carousel">
      <button class="carousel-nav prev" id="quote-prev" aria-label="Previous quote">‹</button>
      <button class="carousel-nav next" id="quote-next" aria-label="Next quote">›</button>
      <div class="carousel-content">
        <div class="carousel-image">
          <img id="quote-image" src="assets/images/checkp1.jpg" alt="Quote illustration" style="display:block;">
        </div>
        <div class="carousel-quotes">
          <div class="quote-slide active" data-img="assets/images/checkp1.jpg">
            <p class="quote-text">The arbitrariness of what happens inside a checkpoint in terms of soldiers' control of Palestinians' time is further comparable to forms of solitary confinement.</p>
            <p class="quote-author">Helga Tawil-Souri</p>
          </div>
          <div class="quote-slide" data-img="assets/images/cp6.jpg">
            <p class="quote-text">The desire to express in an art form comes simply from a desire to compose an image for cinema. It is not my fault that when I go to Ramallah there is a checkpoint and therefore it enters my film.</p>
            <p class="quote-author">Elia Suleiman</p>
          </div>
          <div class="quote-slide" data-img="assets/images/checkp2.jpg">
            <p class="quote-text">Traveling through a checkpoint is a confining and asphyxiating experience.</p>
            <p class="quote-author">Helga Tawil-Souri</p>
          </div>
          <div class="quote-slide" data-img="assets/images/cp5.jpg">
            <p class="quote-text">People are trained to listen for the 'click' of the turnstiles and to accept that their fate and time is not under their control.</p>
            <p class="quote-author">Helga Tawil-Souri</p>
          </div>
          <div class="quote-slide" data-img="assets/images/checkp3.jpg">
            <p class="quote-text">Many of the people in Israel don't really perceive the true meaning of being an occupying nation. How does it affect us and how does it affect the Palestinians?</p>
            <p class="quote-author">Yoav Shamir</p>
          </div>
          <div class="quote-slide" data-img="assets/images/cp6.jpg">
            <p class="quote-text">Occupation is total: it enters the film not as a subject but as a condition of the image.</p>
            <p class="quote-author">Elia Suleiman</p>
          </div>
          <div class="quote-slide" data-img="assets/images/checkp4.jpg">
            <p class="quote-text">The checkpoint is a space where time is suspended, and the camera captures this suspension.</p>
            <p class="quote-author">Mai Masri</p>
          </div>
          <div class="quote-slide" data-img="assets/images/checkp1.jpg">
            <p class="quote-text">Cinema is a refusal to accept the world as it is given.</p>
            <p class="quote-author">Annemarie Jacir</p>
          </div>
          <div class="quote-slide" data-img="assets/images/checkp1.jpg">
            <p class="quote-text">Sometimes what is not shown is as powerful as what is.</p>
            <p class="quote-author">Farah Nablusi</p>
          </div>
        </div>
      </div>
    </section>

    <!-- DIVIDER -->
    <div class="section-divider">
      <div class="divider-ornament">
        <span class="divider-dot"></span>
        <span class="divider-dot"></span>
        <span class="divider-dot"></span>
      </div>
    </div>

    <!-- PROJECT DESCRIPTION -->
    <section class="project-intro">
      <div class="intro-section">
        <h3>About This Project</h3>
        <p>This research explores how Palestinian women filmmakers such as Mai Masri, Annemarie Jacir, and Farah Nablusi create counter-cartographies through their cinematic treatment of Israeli checkpoints.</p>
        <p>I analyze three to five significant checkpoints and how they appear in films released from 2000 to 2025, highlighting how these same spaces are cinematically reimagined and captured over time. Each checkpoint exists as a case study in cinematic resistance.</p>
        
        <ul class="question-list">
          <li>How do camera angles refuse the surveillance gaze?</li>
          <li>What do ellipses and offscreen space keep from view?</li>
          <li>How does editing create a counternarrative to security footage?</li>
          <li>What is the politics of what these filmmakers choose not to show?</li>
        </ul>
      </div>
    </section>

    <!-- NAVIGATION GRID -->
    <section class="nav-grid">
      <a href="map.html" class="nav-card">
        <h2>Map & Archive</h2>
        <p>Explore an interactive map and film archive of checkpoint locations and scenes from Palestinian cinema.</p>
        <span class="card-link">Explore Map</span>
      </a>
      <a href="checkpoints.html" class="nav-card">
        <h2>Checkpoints</h2>
        <p>Browse case studies of key checkpoints and their cinematic representations.</p>
        <span class="card-link">View Checkpoints</span>
      </a>
      <a href="analysis.html" class="nav-card">
        <h2>Visual Analysis</h2>
        <p>See visual breakdowns, charts, and film stills that reveal how filmmakers reimagine surveillance spaces.</p>
        <span class="card-link">See Analysis</span>
      </a>
      <a href="not-mapped.html" class="nav-card">
        <h2>What’s Not Mapped</h2>
        <p>Discover moments of refusal, gaps in the archive, and the politics of cinematic omission.</p>
        <span class="card-link">Learn More</span>
      </a>
    </section>
  </main>

  <footer class="footer">© 2026 Cinematic Counter‑Cartographies</footer>
  <button id="scrollTopBtn" aria-label="Scroll to top" style="
    display:none;position:fixed;bottom:32px;right:32px;z-index:99;
    background:#288366;color:#fff;border:none;border-radius:50%;
    width:48px;height:48px;font-size:2rem;box-shadow:0 2px 8px #2222;
    cursor:pointer;transition:background 0.2s,transform 0.2s;
  ">↑</button>
  <script>
    window.addEventListener('scroll', function() {
      document.getElementById('scrollTopBtn').style.display = window.scrollY > 200 ? 'block' : 'none';
    });
    document.getElementById('scrollTopBtn').onclick = () => window.scrollTo({top:0,behavior:'smooth'});
  </script>
  <script>
document.addEventListener('DOMContentLoaded', function () {
  // Colorful title
  const title = document.getElementById('colorful-title');
  if (title) {
    const colors = ['#e6a93a', '#288366'];
    const text = title.textContent;
    let html = '';
    let colorIndex = 0;
    for (let i = 0; i < text.length; i++) {
      const char = text[i];
      if (char === ' ' || char === '‑' || char === ':' || char === '-') {
        html += char;
      } else {
        html += `<span style="color:${colors[colorIndex % colors.length]}">${char}</span>`;
        colorIndex++;
      }
    }
    title.innerHTML = html;
  }

  // Quote carousel with pacing based on quote length
  const slides = document.querySelectorAll('.quote-slide');
  const quoteImg = document.getElementById('quote-image');
  let current = 0;
  let timer = null;

  // Calculate duration for each quote based on its length
  function getQuoteDurations() {
    const base = 4000; // minimum duration
    const perChar = 45; // ms per character
    return Array.from(slides).map(slide => {
      const text = slide.querySelector('.quote-text').innerText;
      return Math.max(base, text.length * perChar);
    });
  }
  let quoteDurations = getQuoteDurations();

  function showSlide(idx) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === idx);
    });
    current = idx;
    // Set image if available, otherwise keep previous image
    const imgSrc = slides[idx].getAttribute('data-img');
    if (imgSrc) {
      quoteImg.src = imgSrc;
      quoteImg.style.display = 'block';
    } else {
      quoteImg.style.display = 'block';
    }
    clearInterval(timer);
    timer = setInterval(nextSlide, quoteDurations[idx]);
  }

  function nextSlide() {
    showSlide((current + 1) % slides.length);
  }
  function prevSlide() {
    showSlide((current - 1 + slides.length) % slides.length);
  }

  document.getElementById('quote-next').addEventListener('click', nextSlide);
  document.getElementById('quote-prev').addEventListener('click', prevSlide);

  showSlide(0);

  document.querySelector('.quote-carousel').addEventListener('mouseenter', () => {
    clearInterval(timer);
  });
  document.querySelector('.quote-carousel').addEventListener('mouseleave', () => {
    timer = setInterval(nextSlide, quoteDurations[current]);
  });

  // Recalculate durations if quotes change dynamically
  window.addEventListener('resize', () => {
    quoteDurations = getQuoteDurations();
  });
});
  </script>
  <script>
    // Images matched to each quote's theme/content:
    const bgForQuote = [
      // 1. “The arbitrariness of what happens inside a checkpoint ... solitary confinement.”
      "assets/images/checkp1.jpg", // Suggests confinement, checkpoint interior

      // 2. “The desire to express in an art form ... occupation is total.”
      "assets/images/cp6.jpg", // Artistic, wide shot, occupation visible

      // 3. “Traveling through a checkpoint is a confining and asphyxiating experience.”
      "assets/images/checkp2.jpg", // Crowded, tense checkpoint

      // 4. “People are trained to listen for the ‘click’ of the turnstiles ...”
      "assets/images/cp5.jpg", // Turnstile or checkpoint machinery

      // 5. “Many of the people in Israel don't really perceive ... how does it affect our society?”
      "assets/images/checkp3.jpg" // Broader, societal, soldiers and civilians
    ];

    // Quote durations in milliseconds (longer for longer quotes)
    const quoteDurations = [
      7000, // 1. “The arbitrariness ... solitary confinement.” (long)
      12000, // 2. “The desire to express ... occupation is total.” (very long)
      7000, // 3. “Traveling through a checkpoint ...” (medium)
      6000, // 4. “People are trained to listen ...” (shorter)
      10000 // 5. “Many of the people in Israel ...” (long)
    ];

    const slides = document.querySelectorAll('.quote-slide');
    const quoteImg = document.getElementById('quote-image');
    let current = 0;
    let timer = null;

    function showSlide(idx) {
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === idx);
      });
      current = idx;
      if(quoteImg && bgForQuote.length) {
        quoteImg.src = bgForQuote[idx % bgForQuote.length];
      }
      // Clear and restart timer with appropriate duration
      clearInterval(timer);
      timer = setInterval(nextSlide, quoteDurations[idx % quoteDurations.length]);
    }

    function nextSlide() {
      showSlide((current + 1) % slides.length);
    }
    function prevSlide() {
      showSlide((current - 1 + slides.length) % slides.length);
    }

    document.getElementById('quote-next').addEventListener('click', () => {
      nextSlide();
    });
    document.getElementById('quote-prev').addEventListener('click', () => {
      prevSlide();
    });

    /*
      Simple site-wide search for static pages.
      Add this script after your other scripts.
      You must add page content to the 'sitePages' array below.
      For best results, add a summary or main text for each page.
    */
    const sitePages = [
      {
        title: "Home",
        url: "index.html",
        content: `
          Cinematic Counter‑Cartographies. My research project explores how Palestinian women filmmakers such as Mai Masri, Annemarie Jacir, and Farah Nablusi create counter-cartographies through their cinematic work and their treatment of Israeli checkpoints. Questions: camera angles, surveillance gaze, ellipses, offscreen space, counternarrative, security footage, what's not mapped.
        `
      },
      {
        title: "Map & Archive",
        url: "map.html",
        content: `
          Interactive map and film archive of checkpoint locations and scenes from Palestinian cinema. Search for films, directors, and checkpoint locations.
        `
      },
      {
        title: "Checkpoints",
        url: "checkpoints.html",
        content: `
          Case studies of key checkpoints and their cinematic representations. Includes Qalandiya, Bethlehem, Huwwara, prison checkpoints, and more.
        `
      },
      {
        title: "Visual Analysis",
        url: "analysis.html",
        content: `
          Visual breakdowns, charts, and film stills that reveal how filmmakers reimagine surveillance spaces. Includes analysis of camera angles, editing, and cinematic resistance.
        `
      },
      {
        title: "What's Not Mapped",
        url: "not-mapped.html",
        content: `
          Moments of refusal, gaps in the archive, and the politics of cinematic omission. Explore what filmmakers choose not to show.
        `
      }
    ];

    // Add this after your sitePages array and before searchSite()
    function getPageText() {
      // Get all visible text from the body, excluding nav and footer
      const exclude = ['nav', 'footer', 'form', 'input', 'button', 'script', 'style'];
      let text = '';
      document.body.querySelectorAll('*').forEach(el => {
        if (!exclude.includes(el.tagName.toLowerCase())) {
          text += ' ' + (el.innerText || '');
        }
      });
      return text.replace(/\s+/g, ' ').trim();
    }

    // Add homepage actual text to the search index
    sitePages[0].content += ' ' + getPageText();

    function searchSite(query) {
      query = query.trim().toLowerCase();
      if (!query) return [];
      let expanded = [query, ...getSynonyms(query)];
      return sitePages
        .map(page => {
          let matchTitle = expanded.some(q => typoMatch(q, page.title.toLowerCase()));
          let matchContent = expanded.some(q => typoMatch(q, page.content.toLowerCase()));
          if (matchTitle || matchContent) {
            // Highlight matches in results
            const regex = new RegExp(`(${expanded.join('|')})`, 'gi');
            return {
              ...page,
              snippet: page.content.replace(regex, '<mark>$1</mark>')
            };
          }
          return null;
        })
        .filter(Boolean);
    }

    document.getElementById('site-search-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const query = document.getElementById('site-search-input').value;
      const results = searchSite(query);
      const resultsDiv = document.getElementById('site-search-results');
      document.getElementById('site-search-suggestions').style.display = 'none';
      if (results.length === 0) {
        resultsDiv.innerHTML = `<div style="color:#b9e3d4;padding:1rem;text-align:center;">No results found.</div>`;
      } else {
        resultsDiv.innerHTML = `
          <div style="
            max-height: 260px;
            overflow-y: auto;
            background: rgba(111,231,193,0.13);
            border-radius: 12px;
            padding: 0.5rem 0.5rem;
          ">
            <div style="color:#6fe7c1;font-weight:bold;padding:0.3rem 0.7rem 0.2rem 0;">
              ${results.length} result${results.length > 1 ? 's' : ''} found
            </div>
            ${results.map(r => `
              <div style="
                background: rgba(10,35,33,0.18);
                margin: 0.5rem 0;
                padding: 0.7rem 1rem;
                border-radius: 10px;
                box-shadow: 0 1px 6px rgba(111,231,193,0.06);
                color: #eaf7f2;
                font-size: 0.97rem;
                opacity: 0.92;
              ">
                <a href="${r.url}" style="font-size:1.08rem;color:#6fe7c1;font-weight:bold;text-decoration:none;">${r.title}</a>
                <div style="margin-top:0.4rem;">
                  ${r.snippet.length > 180 
                    ? r.snippet.slice(0, 180) + '...'
                    : r.snippet}
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }
    });

    // Synonyms and typo tolerance dictionary
    const synonyms = {
      'checkpoint': ['checkpoints', 'border', 'gate', 'barrier'],
      'film': ['movie', 'cinema', 'director'],
      'archive': ['map', 'collection', 'database'],
      'palestinian': ['palestine', 'west bank', 'gaza'],
      'surveillance': ['security', 'camera', 'monitoring'],
      'refusal': ['resistance', 'omission', 'gap'],
      // Add more as needed
    };

    function getSynonyms(word) {
      return synonyms[word] || [];
    }

    // Basic typo tolerance (Levenshtein distance 1)
    function typoMatch(query, text) {
      if (text.includes(query)) return true;
      for (let i = 0; i < query.length; i++) {
        let typo = query.slice(0, i) + query.slice(i + 1);
        if (text.includes(typo)) return true;
      }
      return false;
    }

    // Autocomplete suggestions
    document.getElementById('site-search-input').addEventListener('input', function(e) {
      const query = e.target.value.trim().toLowerCase();
      const suggestionsDiv = document.getElementById('site-search-suggestions');
      const resultsDiv = document.getElementById('site-search-results');
      if (!query) {
        suggestionsDiv.style.display = 'none';
        suggestionsDiv.innerHTML = '';
        resultsDiv.innerHTML = ''; // <-- This line clears the results when search is erased
        return;
      }
      let suggestions = sitePages
        .filter(page => page.title.toLowerCase().includes(query) || page.content.toLowerCase().includes(query))
        .map(page => page.title)
        .slice(0, 5);
      }f (suggestions.length) {
    }); suggestionsDiv.style.display = 'block';
  </script>gestionsDiv.innerHTML = suggestions.map(s => `<div class="suggestion-item" tabindex="0">${s}</div>`).join('');
</body> else {
</html> suggestionsDiv.style.display = 'none';
        suggestionsDiv.innerHTML = '';
      }
    });

    // Keyboard navigation for suggestions
    document.getElementById('site-search-suggestions').addEventListener('click', function(e) {
      if (e.target.classList.contains('suggestion-item')) {
        document.getElementById('site-search-input').value = e.target.textContent;
        document.getElementById('site-search-suggestions').style.display = 'none';
        document.getElementById('site-search-form').dispatchEvent(new Event('submit'));
      }
    });
  </script>
</body>
</html>